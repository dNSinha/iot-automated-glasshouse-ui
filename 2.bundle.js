(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{342:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Home=void 0;var n,r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=n?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(a,r,o):a[r]=e[r]}a.default=e,t&&t.set(e,a);return a}(a(2)),o=a(141),i=a(700),l=(n=a(679))&&n.__esModule?n:{default:n};a(698);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}a(699);var h=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(a=!(r=d(t).call(this,e))||"object"!==c(r)&&"function"!=typeof r?m(n):r).state={data:[{time:null,soil_moisture:null,temperature:null,water_tank:null,humidity:null}]},a.fetchData=a.fetchData.bind(m(a)),a}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),a=t,(n=[{key:"fetchData",value:function(){var e=this;l.default.getCurrentData().then((function(t){var a=t.data&&t.data.sensorValues&&t.data.sensorValues[0],n={time:a&&a.time&&a.time.substring(0,5),avg_soil_moisture:a&&a.avg_soil_moisture&&a.avg_soil_moisture.toString(),soil_moisture1:a&&a.soil_moisture1&&a.soil_moisture1.toString(),soil_moisture2:a&&a.soil_moisture2&&a.soil_moisture2.toString(),soil_moisture3:a&&a.soil_moisture3&&a.soil_moisture3.toString(),humidity:a&&a.humidity&&a.humidity.toString(),temperature:a&&a.temperature&&a.temperature.toString(),water_tank:a&&a.water_tank&&a.water_tank.toString(),light:a&&a.water_tank&&a.light.toString()};(e.state.data.slice(-1)&&e.state.data.slice(-1)[0]).time!==n.time&&e.setState((function(e){return{data:[].concat(s(e.data),[n])}}))})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;setInterval((function(){e.fetchData()}),6e4)}},{key:"render",value:function(){return r.default.createElement("div",{className:"container"},r.default.createElement("div",{className:"line-chart"},r.default.createElement(i.LineChart,{width:750,height:250,data:this.state.data},r.default.createElement(i.Line,{type:"monotone",dataKey:"avg_soil_moisture",stroke:"#8884d8"}),r.default.createElement(i.CartesianGrid,{stroke:"#ccc",strokeDasharray:"5 5"}),r.default.createElement(i.XAxis,{dataKey:"time"}," ",r.default.createElement(i.Label,{value:"Average Soil Moisture",offset:0,position:"insideBottom"})," "),r.default.createElement(i.YAxis,null),r.default.createElement(i.Tooltip,null))),r.default.createElement("div",{className:"line-chart"},r.default.createElement(i.LineChart,{width:750,height:250,data:this.state.data},r.default.createElement(i.Line,{type:"monotone",dataKey:"humidity",stroke:"#8884d8"}),r.default.createElement(i.CartesianGrid,{stroke:"#ccc",strokeDasharray:"5 5"}),r.default.createElement(i.XAxis,{dataKey:"time"}," ",r.default.createElement(i.Label,{value:"Humidity",offset:0,position:"insideBottom"})," "),r.default.createElement(i.YAxis,null),r.default.createElement(i.Tooltip,null))),r.default.createElement("div",{className:"line-chart"},r.default.createElement(i.LineChart,{width:750,height:250,data:this.state.data},r.default.createElement(i.Line,{type:"monotone",dataKey:"temperature",stroke:"#82ca9d"}),r.default.createElement(i.CartesianGrid,{stroke:"#ccc",strokeDasharray:"5 5"}),r.default.createElement(i.XAxis,{dataKey:"time"}," ",r.default.createElement(i.Label,{value:"Temperature",offset:0,position:"insideBottom"})," "),r.default.createElement(i.YAxis,null),r.default.createElement(i.Tooltip,null))),r.default.createElement("div",{className:"line-chart"},r.default.createElement(i.LineChart,{width:750,height:250,data:this.state.data},r.default.createElement(i.Line,{type:"monotone",dataKey:"water_tank",stroke:"#82ca9d"}),r.default.createElement(i.CartesianGrid,{stroke:"#ccc",strokeDasharray:"5 5"}),r.default.createElement(i.XAxis,{dataKey:"time"}," ",r.default.createElement(i.Label,{value:"Water Tank",offset:0,position:"insideBottom"})," "),r.default.createElement(i.YAxis,null),r.default.createElement(i.Tooltip,null))),r.default.createElement("div",{className:"line-chart"},r.default.createElement(i.LineChart,{width:750,height:250,data:this.state.data},r.default.createElement(i.Line,{type:"monotone",dataKey:"light",stroke:"#82ca9d"}),r.default.createElement(i.CartesianGrid,{stroke:"#ccc",strokeDasharray:"5 5"}),r.default.createElement(i.XAxis,{dataKey:"time"}," ",r.default.createElement(i.Label,{value:"Light",offset:0,position:"insideBottom"})," "),r.default.createElement(i.YAxis,null),r.default.createElement(i.Tooltip,null))))}}])&&f(a.prototype,n),o&&f(a,o),t}(r.default.Component);t.Home=h;var y=(0,o.connect)()(h);t.default=y},679:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=a(680))&&n.__esModule?n:{default:n};function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,n=[{key:"getCurrentData",value:function(){return new Promise((function(e,t){r.default.get("https://automated-glasshouse-service.herokuapp.com/api/sensorNow/current").then((function(t){e(t&&t.data)})).catch((function(e){t(e)}))}))}},{key:"getTimedData",value:function(e){return new Promise((function(t,a){r.default.post("https://automated-glasshouse-service.herokuapp.com/api/sensor/timed",e).then((function(e){t(e&&e.data)})).catch((function(e){a(e)}))}))}}],(a=null)&&o(t.prototype,a),n&&o(t,n),e}();t.default=i},698:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.helpers=void 0;var n={getDate:function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear();return t<10&&(t="0".concat(t)),a<10&&(a="0".concat(a)),e="".concat(n,"-").concat(a,"-").concat(t)},getTime:function(){var e=new Date,t=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),a=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes(),n=e.getSeconds()<10?"0".concat(e.getSeconds()):e.getSeconds();return e="".concat(t,":").concat(a,":").concat(n)}};t.helpers=n},699:function(e,t,a){e.exports={home:"home","line-chart":"line-chart"}}}]);
//# sourceMappingURL=2.bundle.js.map